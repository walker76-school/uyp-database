DROP DATABASE IF EXISTS UYP;
CREATE DATABASE UYP;
USE UYP;

CREATE TABLE USERS (
	ID int NOT NULL,
	Password VARCHAR(255) NOT NULL,
	Primary Key(ID)
);

CREATE TABLE SECONDARY_USER_INFO (
	ID int NOT NULL,
	Suffix VARCHAR(255),
	First_name VARCHAR(255) NOT NULL,
	Last_Name VARCHAR(255) NOT NULL,
	Initial CHAR(1),
	Preferred_Name VARCHAR(255),
	Address_Line_1 VARCHAR(255),
	Address_Line_2 VARCHAR(255),
	City VARCHAR(255),
	State VARCHAR(255),
	Zip VARCHAR(255),
	Birthday DATE NOT NULL,
	Gender BOOLEAN NOT NULL,
	Race VARCHAR(255),
	School_Name VARCHAR(255),
	School_District VARCHAR(255),
	Grade_In_Fall INT,
	GT_Status Enum('yes', 'no', 'unsure'),
	Grad_Year INT,
	High_School VARCHAR(255),
	Email VARCHAR(25),
	Phone_Number VARCHAR(10),
	Sibling_Name VARCHAR(255),
	Primary Key(ID),
	Foreign Key(ID) REFERENCES USERS(ID) ON DELETE CASCADE
);

CREATE TABLE ADMIN_USER_INFO (
	ID int NOT NULL,
	Year_Accepted INT,
	Grade_Accepted INT,
	Enrollment_Status VARCHAR(255),
	Grant_Status VARCHAR(255),
	Disability VARCHAR(255),
	Health VARCHAR(255),
	ELL BOOLEAN,
	GT_INFO BOOLEAN,
	Additional_Info VARCHAR(255),
	Primary Key(ID),
	Foreign Key(ID) REFERENCES USERS(ID) ON DELETE CASCADE
);

CREATE TABLE PARENT(
	Email VARCHAR(255) NOT NULL,
	Phone_Number VARCHAR(10),
	Phone_Type Enum('home', 'work', 'cell'),
	Suffix VARCHAR(255),
	First_name VARCHAR(255) NOT NULL,
	Last_Name VARCHAR(255) NOT NULL,
	Initial CHAR(1),
	Primary Key(Email)
);

CREATE TABLE Parent_To_Student (
	ID int NOT NULL,
	Email VARCHAR(255) NOT NULL,
	Primary Key(ID, Email),
	Foreign Key(ID) REFERENCES USERS(ID),
	FOREIGN KEY(Email) REFERENCES PARENT(Email)
);

CREATE TABLE Mentor(
	ID Int NOT NULL,
	Year Int Not NULL,
	Name VARCHAR(255) NOT NULL,
	Primary Key(ID, Year, Name),
	FOREIGN KEY(ID) REFERENCES USERS(ID)
);

CREATE TABLE Class(
	Name VARCHAR(255) NOT NULL,
	Start_Day DATE NOT NULL,
	Grade_Level INT NOT NULL,
	Room_Number VARCHAR(255) NOT NULL,
	Instructor_Name VARCHAR(255) NOT NULL,
	Start_Time TIME NOT NULL,
	End_TIme TIME NOT NULL,
	Capacity INT NOT NULL,
	Current_Enrollment INT NOT NULL,
	PRIMARY KEY(Name, Start_Day, Grade_Level)
);

CREATE TABLE Takes(
	ID INT NOT NULL,
	Name VARCHAR(255) NOT NULL,
	Start_Day DATE NOT NULL,
	Grade_Level INT NOT NULL,
	Primary Key(ID, Name, Start_Day, Grade_Level),
	Foreign Key (Id) REFERENCES USERS(ID),
	Foreign Key (Name, Start_Day, Grade_Level) References Class (Name, Start_Day, Grade_Level)
);

CREATE TABLE Sibling_Link(
	Primary_ID Int NOT NULL,
	Sibling_ID INT NOT NULL,
	PRIMARY KEY (PRIMARY_ID, Sibling_ID),
	Foreign Key (Primary_ID) REFERENCES Users(ID),
	Foreign Key (Sibling_ID) REFERENCES Users(ID)
);
	